<!DOCTYPE html>
<html>
    <head>
        <title>FreshCart</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script id="freshproducts" type="text/xml">
            <products>
                <product>
                    <img>./freshproduce/dragonfruit.avif</img>
                    <name>Dragon Fruit</name>
                    <price>4.3</price>
                    <category>Fruits</category>
                    <category>Pre-Cut Fruits</category>
                    <category>Season Produce</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/mangoes.avif</img>
                    <name>Mangoes</name>
                    <price>5.6</price>
                    <category>Fruits</category>
                    <category>Season Produce</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/oranges.webp</img>
                    <name>Oranges</name>
                    <price>2.5</price>
                    <category>Fruits</category>
                    <category>Pre-Cut Fruits</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/jasmines.jpg</img>
                    <name>Jasmines</name>
                    <price>4.6</price>
                    <discount>1</discount>
                    <newPrice>3.6</newPrice>
                    <category>Flowers</category>
                    <category>Rollbacks</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/ketchup.jpg</img>
                    <name>Ketchup</name>
                    <price>2.6</price>
                    <category>Salsa and Dips</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/cauliflower.avif</img>
                    <name>Cauliflower</name>
                    <price>2.6</price>
                    <category>Vegetables</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/papaya.jpg</img>
                    <name>Papaya</name>
                    <price>6.7</price>
                    <discount>2</discount>
                    <newPrice>4.7</newPrice>
                    <category>Fruits</category>
                    <category>Pre-Cut Fruits</category>
                    <category>Rollbacks</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/pineapples.jpg</img>
                    <name>Pineapple</name>
                    <price>7.5</price>
                    <category>Fruits</category>
                    <category>Season Produce</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/lime.jpg</img>
                    <name>Lime</name>
                    <price>1.7</price>
                    <discount>1</discount>
                    <newPrice>0.7</newPrice>
                    <category>Vegetables</category>
                    <category>Rollbacks</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/lillies.jpg</img>
                    <name>Lillies</name>
                    <price>6.7</price>
                    <category>Flowers</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/roses.jpg</img>
                    <name>Roses</name>
                    <price>8.7</price>
                    <category>Flowers</category>
                    <category>New Items</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/ranch.jpg</img>
                    <name>Ranch</name>
                    <price>2.5</price>
                    <category>Salsa and Dips</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/carrots.avif</img>
                    <name>Carrots</name>
                    <price>3.5</price>
                    <category>Vegetables</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/spinach.avif</img>
                    <name>Spinach</name>
                    <price>1.4</price>
                    <category>Vegetables</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/strawberry.avif</img>
                    <name>Strawberries</name>
                    <price>4.3</price>
                    <category>Fruits</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/tomatoes.avif</img>
                    <name>Tomatoes</name>
                    <price>4.2</price>
                    <discount>2.0</discount>
                    <newPrice>2.2</newPrice>
                    <category>Vegetables</category>
                    <category>Rollbacks</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/orchids.jpg</img>
                    <name>Orchids</name>
                    <price>11.4</price>
                    <category>Flowers</category>
                    <category>New Items</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/tartar.jpg</img>
                    <name>Tartar</name>
                    <price>4.3</price>
                    <category>Salsa and Dips</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/kiwi.jpg</img>
                    <name>Kiwi</name>
                    <price>13.5</price>
                    <discount>2</discount>
                    <newPrice>11.5</newPrice>
                    <category>Pre-Cut Fruits</category>
                    <category>Rollbacks</category>
                    <count>5</count>
                </product>
                <product>
                    <img>./freshproduce/avocado.jpg</img>
                    <name>Avocado</name>
                    <price>5.6</price>
                    <category>Salsa and Dips</category>
                    <count>5</count>
                </product>
            </products>
        </script>
        </head>
    <body onload="display_items(freshproducts,'Shop All')">
        <div class="header">
            <a href="main.html"><img src="grocery.jpeg" alt="grocery bag"/><span id="date"></span></a>
            <h1 style="text-align: center; font-size: 48px; padding:  10px 5px;">FreshCart</h1>
            <ul>
                <li><a href="cart.html">Cart</a></li>
                <li><a href="myaccount.html">My-account</a></li>
                <li><a href="about.html">About-us</a></li>
                <li><a href="contact.html">Contact-us</a></li>
            </ul>
        </div>
        <div class="navbar">
            <ul>
                <li><a href="freshproducts.html">Fresh products</a></li>
                <li><a href="frozen.html">Frozen</a></li>
                <li><a href="pantry.html">Pantry</a></li>
                <li><a href="breakfastandcereal.html">Breakfast and Cereal</a></li>
                <li><a href="baking.html">Baking</a></li>
                <li><a href="snacks.html">Snacks</a></li>
                <li><a href="candy.html">Candy</a></li>
                <li><a href="specialtyshops.html">Specialty shops</a></li>
                <li><a href="deals.html">Deals</a></li>
            </ul>
        </div>
        <div class="content">
            <div class="side">
                <div class="filters">
                    <h3>Filters</h3>
                    <p>Sort by Categories</p>
                    <ul class="categories">
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'Shop All')">Shop all</a></li>
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'Vegetables')">Vegetables</a></li>
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'Fruits')">Fruits</a></li>
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'Pre-Cut Fruits')">Pre-Cut Fruits</a></li>
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'Flowers')">Flowers</a></li>
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'Salsa and Dips')">Salsa and Dips</a></li>
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'Season Produce')">Season Produce</a></li>
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'New Items')">New Items</a></li>
                        <li><a href="javascript:void(0);" onclick="display_items(freshproducts,'Rollbacks')">Rollbacks</a></li>
                    </ul>
                </div>
            </div>
            <div class="maincontent">
            </div>
        </div>
        <div class="footer">
            <h3><em>Name: Prachi Shekhar Kane &nbsp;&nbsp;&nbsp;NetId: PXK220024 &nbsp;&nbsp;&nbsp;CourseNumber: CS6314.001</em></h3>
        </div>
        <script src="functions.js"></script>
        <script>
            var item_lists = [];
            var productobj;
            var freshproducts = document.getElementById('freshproducts').textContent;
            function display_items(items, category){
                productobj = convertXmlToJsArray(items);
                console.log(productobj);
                if(category == 'Shop All'){
                    item_lists = productobj;
                }
                else{
                    item_lists = productobj.filter(function (item){
                        return  item.category.includes(category);
                    });
                }
                console.log(item_lists);
                var item_html = '<section class="container">';
                if(category.includes("Rollbacks"))
                {
                    item_lists.forEach(item => {
                        item_html += `
                            <div class="card">
                                <img src="${item.img}" alt="${item.name}">
                                <h3>${item.name}</h3>
                                <p class="discount">$${item.newPrice.toFixed(2)} <br> <span class="offer">($${item.price.toFixed(2)} - ${item.discount.toFixed(2)}$ Off)</span></p>
                                <br>
                                <div class="qtyTextBox">
                                    <button type="submit" value="Add to Cart" onclick="addToCart('${item.name}',${item.newPrice},parseInt(document.getElementById('${item.name.toLowerCase()}Qty').value))">Add to Cart</button>
                                    <input id="${item.name.toLowerCase()}Qty" type="text" placeholder="Quantity"/>
                                </div>
                            </div>
                        `;
                    });
                }
                else
                {
                    item_lists.forEach(item => {
                        item_html += `
                            <div class="card">
                                <img src="${item.img}" alt="${item.name}">
                                <h3>${item.name}</h3>
                                <p>$${item.price.toFixed(2)}</p>
                                <br>
                                <div class="qtyTextBox">
                                    <button type="submit" value="Add to Cart" onclick="addToCart('${item.name}',${item.price},parseInt(document.getElementById('${item.name.toLowerCase()}Qty').value))">Add to Cart</button>
                                    <input id="${item.name.toLowerCase()}Qty" type="text" placeholder="Quantity"/>
                                </div>
                            </div>
                        `;
                    });            
                }
                item_html+='</section>';
                document.getElementsByClassName('maincontent')[0].innerHTML = item_html;
            }

            function convertXmlToJsArray(items) {
                const parser = new DOMParser();
                const products = parser.parseFromString(items,"text/xml");
                console.log(products);
                var itemxml = products.querySelectorAll('product');
                console.log(itemxml);
                const jsArray = Array.from(itemxml).map(product => {
                    productobj = {
                        img: product.querySelector('img').textContent,
                        name: product.querySelector('name').textContent,
                        price: parseFloat(product.querySelector('price').textContent),
                        category: Array.from(product.querySelectorAll('category')).map(categoryElement => categoryElement.textContent),
                        count: parseInt(product.querySelector('count').textContent)
                    };
                    if (product.querySelector('discount')) {
                        productobj.discount = parseFloat(product.querySelector('discount').textContent);
                    }
                    if (product.querySelector('newPrice')) {
                        productobj.newPrice = parseFloat(product.querySelector('newPrice').textContent);
                    }
                    return productobj;
                });
                return jsArray;
            }
        </script>
        <script>
            /*var freshproducts = "<products>"+
            "<product>"+
                "<img>./freshproduce/dragonfruit.avif</img>"+"<name>Dragon Fruit</name>"+"<price>4.3</price>"+"<category>Fruits</category>"+"<category>Pre-Cut Fruits</category>"+"<category>Season Produce</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/mangoes.avif</img>"+"<name>Mangoes</name>"+"<price>5.6</price>"+"<category>Fruits</category>"+"<category>Season Produce</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/oranges.webp</img>"+"<name>Oranges</name>"+"<price>2.5</price>"+"<category>Fruits</category>"+"<category>Pre-Cut Fruits</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/jasmines.jpg</img>"+"<name>Jasmines</name>"+"<price>4.6</price>"+"<discount>1</discount>"+"<newPrice>3.6</newPrice>"+"<category>Flowers</category>"+"<category>Rollbacks</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/ketchup.jpg</img>"+"<name>Ketchup</name>"+"<price>2.6</price>"+"<category>Salsa and Dips</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/cauliflower.avif</img>"+"<name>Cauliflower</name>"+"<price>2.6</price>"+"<category>Vegetables</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/papaya.jpg</img>"+"<name>Papaya</name>"+"<price>6.7</price>"+"<discount>2</discount>"+"<newPrice>4.7</newPrice>"+"<category>Fruits</category>"+"<category>Pre-Cut Fruits</category>"+"<category>Rollbacks</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/pineapples.jpg</img>"+"<name>Pineapple</name>"+"<price>7.5</price>"+"<category>Fruits</category>"+"<category>Season Produce</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/lime.jpg</img>"+"<name>Lime</name>"+"<price>1.7</price>"+"<discount>1</discount>"+"<newPrice>0.7</newPrice>"+"<category>Vegetables</category>"+"<category>Rollbacks</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/lillies.jpg</img>"+"<name>Lillies</name>"+"<price>6.7</price>"+"<category>Flowers</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/roses.jpg</img>"+"<name>Roses</name>"+"<price>8.7</price>"+"<category>Flowers</category>"+"<category>New Items</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/ranch.jpg</img>"+"<name>Ranch</name>"+"<price>2.5</price>"+"<category>Salsa and Dips</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/carrots.avif</img>"+"<name>Carrots</name>"+"<price>3.5</price>"+"<category>Vegetables</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/spinach.avif</img>"+"<name>Spinach</name>"+"<price>1.4</price>"+"<category>Vegetables</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/strawberry.avif</img>"+"<name>Strawberries</name>"+"<price>4.3</price>"+"<category>Fruits</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/tomatoes.avif</img>"+"<name>Tomatoes</name>"+"<price>4.2</price>"+"<discount>2.0</discount>"+"<newPrice>2.2</newPrice>"+"<category>Vegetables</category>"+"<category>Rollbacks</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/orchids.jpg</img>"+"<name>Orchids</name>"+"<price>11.4</price>"+"<category>Flowers</category>"+"<category>New Items</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/tartar.jpg</img>"+"<name>Tartar</name>"+"<price>4.3</price>"+"<category>Salsa and Dips</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/kiwi.jpg</img>"+"<name>Kiwi</name>"+"<price>13.5</price>"+"<discount>2</discount>"+"<newPrice>11.5</newPrice>"+"<category>Pre-Cut Fruits</category>"+"<category>Rollbacks</category>"+"<count>5</count>"+
            "</product>"+
            "<product>"+
                "<img>./freshproduce/avocado.jpg</img>"+"<name>Avocado</name>"+"<price>5.6</price>"+"<category>Salsa and Dips</category>"+"<count>5</count>"+
            "</product>"+
        "</products>";*/
        </script>
    </body>
</html>

